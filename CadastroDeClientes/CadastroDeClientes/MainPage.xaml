<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CadastroDeClientes.MainPage"
             Title="{Binding Title}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Cabeçalho -->
        <StackLayout Grid.Row="0" Padding="20" BackgroundColor="Transparent">
            <Label Text="Cadastro de Clientes" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   TextColor="{AppThemeBinding Light=#212529, Dark=#F8F9FA}" />
        </StackLayout>

        <!-- Lista de Clientes -->
        <RefreshView Grid.Row="1" 
                     IsRefreshing="{Binding IsBusy}" 
                     Command="{Binding RefreshCommand}"
                     Margin="10">
            <CollectionView ItemsSource="{Binding Clientes}"
                           SelectedItem="{Binding SelectedCliente}"
                           SelectionMode="Single"
                           BackgroundColor="Transparent">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="15" Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <!-- Card Background -->
                            <Border Grid.RowSpan="3" Grid.ColumnSpan="2"
                                   BackgroundColor="{AppThemeBinding Light=White, Dark=#2D3748}"
                                   Stroke="{AppThemeBinding Light=#E2E8F0, Dark=#4A5568}"
                                   StrokeThickness="1"
                                   StrokeShape="RoundRectangle 8" />

                            <!-- Nome Completo -->
                            <Label Grid.Row="0" Grid.Column="0"
                                   Text="{Binding NomeCompleto}"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#2D3748, Dark=#F7FAFC}"
                                   Margin="10,10,10,5" />

                            <!-- Idade -->
                            <Label Grid.Row="0" Grid.Column="1"
                                   Text="{Binding Age, StringFormat='{0} anos'}"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#718096, Dark=#A0AEC0}"
                                   VerticalOptions="Center"
                                   Margin="10,10,10,5" />

                            <!-- Endereço -->
                            <Label Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                   Text="{Binding Address}"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#4A5568, Dark=#CBD5E0}"
                                   Margin="10,0,10,10" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
                <CollectionView.EmptyView>
                    <StackLayout HorizontalOptions="Center" VerticalOptions="Center">
                        <Label Text="Nenhum cliente cadastrado"
                               FontSize="16"
                               TextColor="{AppThemeBinding Light=#718096, Dark=#A0AEC0}"
                               HorizontalOptions="Center" />
                        <Label Text="Clique em 'Incluir' para adicionar o primeiro cliente"
                               FontSize="14"
                               TextColor="{AppThemeBinding Light=#A0AEC0, Dark=#718096}"
                               HorizontalOptions="Center"
                               Margin="0,5,0,0" />
                    </StackLayout>
                </CollectionView.EmptyView>
            </CollectionView>
        </RefreshView>

        <!-- Botões de Ação -->
        <StackLayout Grid.Row="2" 
                     Orientation="Horizontal" 
                     HorizontalOptions="Center" 
                     Padding="20" 
                     Spacing="15"
                     BackgroundColor="Transparent">
            
            <Button Text="Incluir"
                    Command="{Binding IncluirClienteCommand}"
                    BackgroundColor="{AppThemeBinding Light=#28A745, Dark=#20C997}"
                    TextColor="White"
                    WidthRequest="100"
                    HeightRequest="45"
                    CornerRadius="8"
                    FontAttributes="Bold" />
            
            <Button Text="Alterar"
                    Command="{Binding AlterarClienteCommand}"
                    BackgroundColor="{AppThemeBinding Light=#007BFF, Dark=#0D6EFD}"
                    TextColor="White"
                    WidthRequest="100"
                    HeightRequest="45"
                    CornerRadius="8"
                    FontAttributes="Bold" />
            
            <Button Text="Excluir"
                    Command="{Binding ExcluirClienteCommand}"
                    BackgroundColor="{AppThemeBinding Light=#DC3545, Dark=#E74C3C}"
                    TextColor="White"
                    WidthRequest="100"
                    HeightRequest="45"
                    CornerRadius="8"
                    FontAttributes="Bold" />
        </StackLayout>

        <!-- Loading Indicator -->
        <ActivityIndicator Grid.RowSpan="3"
                          IsVisible="{Binding IsBusy}"
                          IsRunning="{Binding IsBusy}"
                          Color="{AppThemeBinding Light=#007BFF, Dark=#0D6EFD}"
                          Scale="1.5"
                          HorizontalOptions="Center"
                          VerticalOptions="Center" />
    </Grid>

</ContentPage>
